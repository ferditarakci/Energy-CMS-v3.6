(function(a){a.fn.priceFormat=function(b){var c={prefix:"US$ ",centsSeparator:".",thousandsSeparator:",",limit:false,centsLimit:2};var b=a.extend(c,b);return this.each(function(){function j(a){var b="";for(var c=0;c<a.length;c++){char=a.charAt(c);if(b.length==0&&char==0)char=false;if(char&&char.match(d)){if(h){if(b.length<h)b=b+char}else{b=b+char}}}return b}function k(a){while(a.length<i+1)a="0"+a;return a}function l(a){var b=k(j(a));var c="";var d=0;var h=b.substr(b.length-i,i);var l=b.substr(0,b.length-i);b=l+f+h;if(g){for(var m=l.length;m>0;m--){char=l.substr(m-1,1);d++;if(d%3==0)char=g+char;c=char+c}if(c.substr(0,1)==g)c=c.substring(1,c.length);b=c+f+h}if(e)b=b+e;return b}function m(a){var b=a.keyCode?a.keyCode:a.which;var d=String.fromCharCode(b);var e=false;var f=c.val();var g=l(f+d);if(b>=96&&b<=105)e=true;if(b==8)e=true;if(b==9)e=true;if(b==13)e=true;if(b==37)e=true;if(b==39)e=true;if(!e){a.preventDefault();a.stopPropagation();if(f!=g)c.val(g)}}function n(){var a=c.val();var b=l(a);if(a!=b)c.val(b)}var c=a(this);var d=/[0-9]/;var e=b.prefix;var f=b.centsSeparator;var g=b.thousandsSeparator;var h=b.limit;var i=b.centsLimit;a(this).bind("keydown",m);a(this).bind("keyup",n);if(a(this).val().length>0)n()})}})(jQuery);